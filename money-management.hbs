<div>
  {{#unless useModuleCurrency}}
  <div class="warning-message" style="margin-bottom: 1rem;">
    <p><strong>Character Sheet Currency Mode:</strong> Player money is managed through character sheet items. Direct wallet modifications are disabled. Configure currency denominations in Currency Settings.</p>
  </div>
  {{/unless}}

  <div class="user-list">
  {{#each users}}
  <div class="user-item" data-user-id="{{id}}">
    <div>
      <strong>{{name}}</strong>
      <br>
      <small>Wallet: {{formatCurrency wallet}}</small>
      {{#unless ../useModuleCurrency}}
      <br>
      <small style="font-style: italic; color: #666;">From character sheet</small>
      {{/unless}}
    </div>
    <div class="user-money-controls">
      <input type="number" class="money-input" name="amount-{{id}}" value="0" step="1" {{#unless ../useModuleCurrency}}disabled{{/unless}}>
    </div>
  </div>
  {{/each}}
  
  {{#unless users}}
  <p>No players found.</p>
  {{/unless}}
  </div>

  <div class="button-row">
    <button type="button" class="primary" data-action="update-wallets" {{#unless useModuleCurrency}}disabled{{/unless}}>
      {{#if useModuleCurrency}}Update All Wallets{{else}}Character Sheet Mode{{/if}}
    </button>
      <button type="button" class="secondary" onclick="const w = this.closest('.window-app'); w?.querySelector('.window-header .close')?.click();">Cancel</button>
    </div>
</div>
